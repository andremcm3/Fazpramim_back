image: python:3.11

stages:
  - test

test-backend:
  stage: test
  before_script:
    - pip install --upgrade pip
    - |
      if [ -f "requirements.txt" ]; then
        pip install -r requirements.txt
      else
        echo "requirements.txt not found, installing basic Django"
        pip install Django djangorestframework gunicorn
      fi
  script:
    - |
      if [ -f "manage.py" ]; then
        python manage.py check
        echo "Tests would run here"
      else
        echo "manage.py not found, skipping Django tests"
      fi
  only:
    - master
    - main